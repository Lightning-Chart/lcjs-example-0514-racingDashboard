(self.webpackChunk=self.webpackChunk||[]).push([[524],{44:(e,t,n)=>{const l=n(377),{AxisScrollStrategies:s,emptyFill:i,lightningChart:a,isImageFill:o,SolidFill:r,SolidLine:c,PalettedFill:d,LUT:p,ColorHEX:u,ColorRGBA:m,DashedLine:f,emptyLine:y,transparentFill:g,PointShape:h,AxisTickStrategies:S,DataSetXY:_,Themes:x}=l,k=document.getElementById("chart")||document.body;k===document.body&&(k.style.width="100vw",k.style.height="100vh",k.style.margin="0px");const w=document.createElement("canvas");k.append(w);const F=a({sharedContextOptions:{canvas:w,useIndividualCanvas:!1}});fetch(new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"examples/assets/0514/racing-data.json").then(e=>e.json()).then(e=>{let t=0;const n=[];for(;e[t].lap_number<1;)t++;t-=500;const l=()=>{for(let l=0;l<10;l+=1){const l=e[t];if(l.time=performance.now(),n.forEach(e=>e(l,t)),t++,t>=e.length)break}t<e.length&&requestAnimationFrame(l)};setTimeout(l,500);const i=e=>{n.push(e)},a=new _({schema:{time:{pattern:"progressive"}},autoDetectPatterns:!1}).setMaxSampleCount({mode:"auto",max:1e6});i(e=>{a.appendSample(e)});const g=document.createElement("div");k.append(g);const w=F.ChartXY({container:g,defaultAxisX:{type:"linear-highPrecision"},legend:{visible:!1},theme:x[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("");g.style.position="absolute",g.style.left="0px",g.style.top="0px",g.style.width="50%",g.style.height="30%";const v=w.getTheme().isDark;o(w.engine.getBackgroundFillStyle())&&w.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),w.axisX.setTickStrategy(S.Time).setScrollStrategy(s.scrolling).setDefaultInterval(e=>({end:e.dataMax??0,start:(e.dataMax??0)-3e4,stopAxisAfter:!1})),w.axisY.setTitle("Tire temperature").setAnimationScroll(!1).setUnits("F").setInterval({start:180,end:250});const b=new c({thickness:2,fillStyle:new d({lookUpProperty:"y",lut:new p({interpolate:!0,steps:[{value:176,color:u("#ffffff")},{value:212,color:u("#ffa500")},{value:240,color:u("#ff0000")}]})})});w.axisY.addConstantLine().setValue(240).setPointerEvents(!1).setStrokeStyle(new f({thickness:1,fillStyle:new r({color:u("#ff0000")})})),["tire_temp_front_left","tire_temp_front_right","tire_temp_rear_left","tire_temp_rear_right"].map((e,t)=>{w.addLineSeries().setName(e).setStrokeStyle(b).setDataSet(a,{x:"time",y:e})});const T=w.addAxisY({opposite:!0}).setTitle("Fuel").setLength({pixels:50}).setTickStrategy(S.Numeric,e=>e.setTickStyle(e=>e.setGridStrokeStyle(y))).setInterval({start:0,end:1}),L=(w.addAreaSeries({axisY:T,automaticColorIndex:0}).setDataSet(a,{x:"time",y:"fuel"}),document.createElement("div"));k.append(L);const C=F.Gauge({container:L}).setTitle("").setUnitLabel("kph").setPadding(0).setBarThickness(20).setTickFont(e=>e.setSize(14)).setValueLabelFont(e=>e.setSize(20)).setUnitLabelFont(e=>e.setSize(20)).setNeedleLength(30).setNeedleThickness(5).setValueIndicators([{start:0,end:80,color:u("#ffffff")},{start:80,end:160,color:u("#ffa500")},{start:160,end:240,color:u("#ff0000")}]).setValueIndicatorThickness(3).setTickFormatter(e=>e>0&&e<240?"":e.toFixed(0)).setInterval(0,240);L.style.position="absolute",L.style.left="0px",L.style.top="30%",L.style.width="25%",L.style.height="30%",o(C.engine.getBackgroundFillStyle())&&C.engine.setBackgroundFillStyle(new r({color:m(0,0,0)}));const I=document.createElement("div");k.append(I);const A=F.Gauge({container:I}).setTitle("").setUnitLabel("rpm").setPadding(0).setBarThickness(20).setTickFont(e=>e.setSize(14)).setValueLabelFont(e=>e.setSize(20)).setUnitLabelFont(e=>e.setSize(20)).setNeedleLength(30).setNeedleThickness(5).setInterval(0,8e3).setValueIndicators([{start:0,end:2e3,color:u("#ffffff")},{start:2e3,end:4e3,color:u("#FFFF00")},{start:4e3,end:6e3,color:u("#ffa500")},{start:6e3,end:8e3,color:u("#ff0000")}]).setValueIndicatorThickness(3).setTickFormatter(e=>e>0&&e<8e3?"":e.toFixed(0));I.style.width="25%",I.style.height="30%",I.style.position="absolute",I.style.left="25%",I.style.top="30%",i(e=>{C.setValue(3.6*(e.speed??0)),A.setValue(e.current_engine_rpm??0)}),o(A.engine.getBackgroundFillStyle())&&A.engine.setBackgroundFillStyle(new r({color:m(0,0,0)}));const B=document.createElement("div");k.append(B);const P=F.ChartXY({container:B,defaultAxisX:{type:"linear-highPrecision"},legend:{visible:!1}}).setTitle("");B.style.position="absolute",B.style.left="0px",B.style.top="60%",B.style.width="50%",B.style.height="40%",P.axisX.setTickStrategy(S.Time).setScrollStrategy(s.scrolling).setDefaultInterval(e=>({end:e.dataMax??0,start:(e.dataMax??0)-5e3,stopAxisAfter:!1})),o(P.engine.getBackgroundFillStyle())&&P.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),P.axisY.dispose(),["torque","brake","steer"].map((e,t)=>{const n=P.addAxisY({iStack:-t}).setTitle(e).setAnimationScroll(!1).setScrollStrategy(s.fitting);P.addLineSeries({axisY:n}).setDataSet(a,{x:"time",y:e})});const E=document.createElement("div");k.append(E);const Y=F.ChartXY({container:E,legend:{visible:!1},theme:x[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("");E.style.width="50%",E.style.height="30%",E.style.top="0px",E.style.right="0px",E.style.position="absolute",o(Y.engine.getBackgroundFillStyle())&&Y.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),Y.axisX.setTitle("Acc X").setDefaultInterval({start:40,end:-40}).setScrollStrategy(s.expansion),Y.axisY.setTitle("Acc Z").setDefaultInterval({start:-20,end:20}).setScrollStrategy(s.expansion),Y.forEachAxis(e=>e.setAnimationScroll(!1)),Y.setSeriesBackgroundFillStyle(new r({color:u(v?"#000000":"#ffffff")}));const z=Y.addPointSeries().setPointSize(10).setPointStrokeStyle(y).setPointShape(h.Circle).setEffect(!1).setDataSet(a,{x:"acceleration_x",y:"acceleration_z",lookupValue:"time"});setInterval(()=>{z.setPointFillStyle(new d({lookUpProperty:"value",lut:new p({interpolate:!0,steps:[{value:performance.now(),color:u(v?"#ffffff":"#000000")},{value:performance.now()-1e3,color:u("#ff0000")},{value:performance.now()-1e4,color:u("#ff000000")}]})}))},100);const D=document.createElement("div");k.append(D);const R=F.ChartXY({container:D,legend:{visible:!1}}).setTitle("").setTitlePosition("series-left-top").setCursorMode(void 0);D.style.width="50%",D.style.height="30%",D.style.top="30%",D.style.right="0px",D.style.position="absolute",o(R.engine.getBackgroundFillStyle())&&R.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),R.forEachAxis(e=>e.setTickStrategy(S.Empty).setStrokeStyle(y));const U=-950,X=1e3,V=-200,G=750,M=R.addHeatmapGridSeries({columns:30,rows:12,dataOrder:"columns"}).setStart({x:U,y:V}).setEnd({x:X,y:G}).setWireframeStyle(y).setFillStyle(new d({lut:new p({interpolate:!0,steps:[{value:-5,color:u("#00ff00")},{value:0,color:u(v?"#000000":"#ffffff")},{value:5,color:u("#ff0000")}]})})),N=(R.addLineSeries({automaticColorIndex:0}).setDataSet(a,{x:"position_x",y:"position_z"}),R.addPointSeries({automaticColorIndex:0}).setPointSize(15).setPointShape(h.Star));let O;i((t,n)=>{"number"==typeof t.lap_number&&R.setTitle(`Lap ${t.lap_number+1}`),N.setSamples({xValues:[t.position_x],yValues:[t.position_z]});const l=Math.round(29*(t.position_x-U)/(X-U)),s=Math.round(11*(t.position_z-V)/(G-V));if((!O||l!==O.iX||s!==O.iY)&&t.lap_number>0){let i=new Array(10).fill(void 0);for(let l=0;l<n;l++){const n=e[l];if(n.lap_number>=t.lap_number)break;const s=(n.position_x-t.position_x)**2+(n.position_z-t.position_z)**2+(n.current_lap_time-t.current_lap_time)**2,a=i[n.lap_number];(!a||a.delta>s)&&(i[n.lap_number]={delta:s,sample:n})}i=i.filter(e=>void 0!==e).sort((e,t)=>e.sample.current_lap_time-t.sample.current_lap_time);const a=i[0]?.sample;if(a){const e=t.current_lap_time-a.current_lap_time;M.invalidateIntensityValues({iColumn:l,iRow:s,values:[[e]]})}}O={iX:l,iY:s}});const j=document.createElement("div");k.append(j);const q=F.DataGrid({container:j}).setTitle("");let H;j.style.width="50%",j.style.height="40%",j.style.top="60%",j.style.right="0px",j.style.position="absolute",o(q.engine.getBackgroundFillStyle())&&q.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),q.setRowContent(0,["Lap","Lap time","Race time","Race position","Fuel"]);const W=e.slice().reverse();let Z=999999999999;i(e=>{if(q.setRowContent(1,[e.lap_number+1,e.current_lap_time?.toFixed(2)??"",e.current_race_time?.toFixed(2)??"",e.race_position,e.fuel?.toFixed(3)??""]),0!==e.best_lap_time&&(Z=Math.min(Z,e.best_lap_time)),H&&e.lap_number>H.lap_number){let t=1,n=!1;for(;;){const l=e.lap_number-t;if(l<0)break;const s=W.find(e=>e.lap_number===l);q.setRowContent(1+t,[s.lap_number+1,s.current_lap_time?.toFixed(2)??"",s.current_race_time?.toFixed(2)??"",s.race_position,s.fuel?.toFixed(3)??""]),q.setRowBackgroundFillStyle(1+t,s.current_lap_time<=Z&&!n?new r({color:u("#00ff00aa")}):q.getTheme().dataGridCellBackgroundFillStyle),n=n||s.current_lap_time<=Z,t++}}H=e})})}},e=>{e.O(0,[502],()=>e(e.s=44)),e.O()}]);