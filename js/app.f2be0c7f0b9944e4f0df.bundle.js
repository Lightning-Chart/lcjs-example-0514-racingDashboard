(self.webpackChunk=self.webpackChunk||[]).push([[524],{44:(e,t,n)=>{const l=n(377),{AxisScrollStrategies:a,emptyFill:i,lightningChart:s,isImageFill:o,SolidFill:r,SolidLine:c,PalettedFill:d,LUT:p,ColorHEX:u,ColorRGBA:m,DashedLine:f,emptyLine:y,transparentFill:S,PointShape:g,AxisTickStrategies:h,Themes:_}=l,x=document.getElementById("chart")||document.body;x===document.body&&(x.style.width="100vw",x.style.height="100vh",x.style.margin="0px");const k=document.createElement("canvas");x.append(k);const F=s({sharedContextOptions:{canvas:k,useIndividualCanvas:!1}});fetch(new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"examples/assets/0514/racing-data.json").then((e=>e.json())).then((e=>{let t=0;const n=[];for(;e[t].lap_number<1;)t++;t-=500;const l=()=>{for(let l=0;l<10;l+=1){const l=e[t];if(l.time=performance.now(),n.forEach((e=>e(l,t))),t++,t>=e.length)break}t<e.length&&requestAnimationFrame(l)};setTimeout(l,500);const s=e=>{n.push(e)},k=document.createElement("div");x.append(k);const w=F.ChartXY({container:k,defaultAxisX:{type:"linear-highPrecision"},theme:_[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("");k.style.position="absolute",k.style.left="0px",k.style.top="0px",k.style.width="50%",k.style.height="30%";const v=w.getTheme().isDark;o(w.engine.getBackgroundFillStyle())&&w.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),w.axisX.setTickStrategy(h.Time).setScrollStrategy(a.progressive).setDefaultInterval((e=>({end:e.dataMax??0,start:(e.dataMax??0)-3e4,stopAxisAfter:!1}))),w.axisY.setTitle("Tire temperature").setAnimationScroll(!1).setUnits("F").setInterval({start:180,end:250});const b=new c({thickness:2,fillStyle:new d({lookUpProperty:"y",lut:new p({interpolate:!0,steps:[{value:176,color:u("#ffffff")},{value:212,color:u("#ffa500")},{value:240,color:u("#ff0000")}]})})});w.axisY.addConstantLine().setValue(240).setPointerEvents(!1).setStrokeStyle(new f({thickness:1,fillStyle:new r({color:u("#ff0000")})})),["tire_temp_front_left","tire_temp_front_right","tire_temp_rear_left","tire_temp_rear_right"].map(((e,t)=>{const n=w.addPointLineAreaSeries({dataPattern:"ProgressiveX"}).setName(e).setAreaFillStyle(i).setMaxSampleCount(2e5).setStrokeStyle(b);s((t=>{n.appendSample({x:t.time,y:t[e]})}))}));const T=w.addAxisY({opposite:!0}).setTitle("Fuel").setLength({pixels:50}).setTickStrategy(h.Numeric,(e=>e.setTickStyle((e=>e.setGridStrokeStyle(y))))).setInterval({start:0,end:1}),P=w.addPointLineAreaSeries({dataPattern:"ProgressiveX",axisY:T,automaticColorIndex:0}).setMaxSampleCount(2e5);s((e=>P.appendSample({x:e.time,y:e.fuel})));const A=document.createElement("div");x.append(A);const L=F.Gauge({container:A}).setTitle("").setUnitLabel("kph").setPadding(0).setBarThickness(20).setTickFont((e=>e.setSize(14))).setValueLabelFont((e=>e.setSize(20))).setUnitLabelFont((e=>e.setSize(20))).setNeedleLength(30).setNeedleThickness(5).setValueIndicators([{start:0,end:80,color:u("#ffffff")},{start:80,end:160,color:u("#ffa500")},{start:160,end:240,color:u("#ff0000")}]).setValueIndicatorThickness(3).setTickFormatter((e=>e>0&&e<240?"":e.toFixed(0))).setInterval(0,240);A.style.position="absolute",A.style.left="0px",A.style.top="30%",A.style.width="25%",A.style.height="30%",o(L.engine.getBackgroundFillStyle())&&L.engine.setBackgroundFillStyle(new r({color:m(0,0,0)}));const C=document.createElement("div");x.append(C);const I=F.Gauge({container:C}).setTitle("").setUnitLabel("rpm").setPadding(0).setBarThickness(20).setTickFont((e=>e.setSize(14))).setValueLabelFont((e=>e.setSize(20))).setUnitLabelFont((e=>e.setSize(20))).setNeedleLength(30).setNeedleThickness(5).setInterval(0,8e3).setValueIndicators([{start:0,end:2e3,color:u("#ffffff")},{start:2e3,end:4e3,color:u("#FFFF00")},{start:4e3,end:6e3,color:u("#ffa500")},{start:6e3,end:8e3,color:u("#ff0000")}]).setValueIndicatorThickness(3).setTickFormatter((e=>e>0&&e<8e3?"":e.toFixed(0)));C.style.width="25%",C.style.height="30%",C.style.position="absolute",C.style.left="25%",C.style.top="30%",s((e=>{L.setValue(3.6*(e.speed??0)),I.setValue(e.current_engine_rpm??0)})),o(I.engine.getBackgroundFillStyle())&&I.engine.setBackgroundFillStyle(new r({color:m(0,0,0)}));const B=document.createElement("div");x.append(B);const E=F.ChartXY({container:B,defaultAxisX:{type:"linear-highPrecision"}}).setTitle("");B.style.position="absolute",B.style.left="0px",B.style.top="60%",B.style.width="50%",B.style.height="40%",E.axisX.setTickStrategy(h.Time).setScrollStrategy(a.progressive).setDefaultInterval((e=>({end:e.dataMax??0,start:(e.dataMax??0)-5e3,stopAxisAfter:!1}))),o(E.engine.getBackgroundFillStyle())&&E.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),E.axisY.dispose(),["torque","brake","steer"].map(((e,t)=>{const n=E.addAxisY({iStack:-t}).setTitle(e).setAnimationScroll(!1).setScrollStrategy(a.fitting),l=E.addPointLineAreaSeries({dataPattern:"ProgressiveX",axisY:n}).setMaxSampleCount(2e5).setAreaFillStyle(i);s((t=>{l.appendSample({x:t.time,y:t[e]})}))}));const X=document.createElement("div");x.append(X);const z=F.ChartXY({container:X,theme:_[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("");X.style.width="50%",X.style.height="30%",X.style.top="0px",X.style.right="0px",X.style.position="absolute",o(z.engine.getBackgroundFillStyle())&&z.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),z.axisX.setTitle("Acc X").setDefaultInterval({start:40,end:-40}).setScrollStrategy(a.expansion),z.axisY.setTitle("Acc Z").setDefaultInterval({start:-20,end:20}).setScrollStrategy(a.expansion),z.forEachAxis((e=>e.setAnimationScroll(!1))),z.setSeriesBackgroundFillStyle(new r({color:u(v?"#000000":"#ffffff")}));const R=z.addPointLineAreaSeries({dataPattern:null,lookupValues:!0}).setStrokeStyle(y).setPointFillStyle(S).setPointSize(10).setPointShape(g.Circle).setEffect(!1);s((e=>R.appendSample({x:e.acceleration_x,y:e.acceleration_z,lookupValue:e.time}))),setInterval((()=>{R.setPointFillStyle(new d({lookUpProperty:"value",lut:new p({interpolate:!0,steps:[{value:performance.now(),color:u(v?"#ffffff":"#000000")},{value:performance.now()-1e3,color:u("#ff0000")},{value:performance.now()-1e4,color:u("#ff000000")}]})}))}),100);const U=document.createElement("div");x.append(U);const V=F.ChartXY({container:U}).setTitle("").setTitlePosition("series-left-top").setCursorMode(void 0);U.style.width="50%",U.style.height="30%",U.style.top="30%",U.style.right="0px",U.style.position="absolute",o(V.engine.getBackgroundFillStyle())&&V.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),V.forEachAxis((e=>e.setTickStrategy(h.Empty).setStrokeStyle(y)));const Y=-950,M=1e3,G=-200,D=750,N=V.addHeatmapGridSeries({columns:30,rows:12,dataOrder:"columns"}).setStart({x:Y,y:G}).setEnd({x:M,y:D}).setWireframeStyle(y).setFillStyle(new d({lut:new p({interpolate:!0,steps:[{value:-5,color:u("#00ff00")},{value:0,color:u(v?"#000000":"#ffffff")},{value:5,color:u("#ff0000")}]})})),O=V.addPointLineAreaSeries({dataPattern:null,automaticColorIndex:0}).setPointFillStyle(i),j=V.addPointLineAreaSeries({dataPattern:null,automaticColorIndex:0}).setPointSize(15).setPointShape(g.Star);let q;s(((t,n)=>{"number"==typeof t.lap_number&&V.setTitle(`Lap ${t.lap_number+1}`),O.appendSample({x:t.position_x,y:t.position_z}),j.setSamples({xValues:[t.position_x],yValues:[t.position_z]});const l=Math.round(29*(t.position_x-Y)/(M-Y)),a=Math.round(11*(t.position_z-G)/(D-G));if((!q||l!==q.iX||a!==q.iY)&&t.lap_number>0){let i=new Array(10).fill(void 0);for(let l=0;l<n;l++){const n=e[l];if(n.lap_number>=t.lap_number)break;const a=(n.position_x-t.position_x)**2+(n.position_z-t.position_z)**2+(n.current_lap_time-t.current_lap_time)**2,s=i[n.lap_number];(!s||s.delta>a)&&(i[n.lap_number]={delta:a,sample:n})}i=i.filter((e=>void 0!==e)).sort(((e,t)=>e.sample.current_lap_time-t.sample.current_lap_time));const s=i[0]?.sample;if(s){const e=t.current_lap_time-s.current_lap_time;N.invalidateIntensityValues({iColumn:l,iRow:a,values:[[e]]})}}q={iX:l,iY:a}}));const H=document.createElement("div");x.append(H);const W=F.DataGrid({container:H}).setTitle("");let Z;H.style.width="50%",H.style.height="40%",H.style.top="60%",H.style.right="0px",H.style.position="absolute",o(W.engine.getBackgroundFillStyle())&&W.engine.setBackgroundFillStyle(new r({color:m(0,0,0)})),W.setRowContent(0,["Lap","Lap time","Race time","Race position","Fuel"]);const $=e.slice().reverse();let J=999999999999;s((e=>{if(W.setRowContent(1,[e.lap_number+1,e.current_lap_time?.toFixed(2)??"",e.current_race_time?.toFixed(2)??"",e.race_position,e.fuel?.toFixed(3)??""]),0!==e.best_lap_time&&(J=Math.min(J,e.best_lap_time)),Z&&e.lap_number>Z.lap_number){let t=1,n=!1;for(;;){const l=e.lap_number-t;if(l<0)break;const a=$.find((e=>e.lap_number===l));W.setRowContent(1+t,[a.lap_number+1,a.current_lap_time?.toFixed(2)??"",a.current_race_time?.toFixed(2)??"",a.race_position,a.fuel?.toFixed(3)??""]),W.setRowBackgroundFillStyle(1+t,a.current_lap_time<=J&&!n?new r({color:u("#00ff00aa")}):W.getTheme().dataGridCellBackgroundFillStyle),n=n||a.current_lap_time<=J,t++}}Z=e}))}))}},e=>{e.O(0,[502],(()=>e(e.s=44))),e.O()}]);